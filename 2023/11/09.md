## 取り組んだ課題一覧

- 8.Ruby cherry
  - 7.クラス
  - 8.モジュール
  - 9.例外
  - 10.yieldとproc
  - 11.パターンマッチ

## わかったこと

- クラス
  - 定数
    - 文字列、配列、ハッシュミュータブルなメソッドには特に注意
      - `.map(&.freeze)`などで防げる
    - アクセス方法AAA::BBB
    - mapや三項演算子も定義可能
  - クラスメソッド
    - 基本はpublicになる
    - privateにする方法
      - class << self end　でくくる
      - private_class_method :hogeを定義後に宣言する
  - インスタンス変数
    - オーバーライド可能
      - 継承元のクラスの構造の理解が必要
      - メソッドのオーバーライドで親のメソッドが書き変わらないのとは違う仕組み？
  - protected
    - protectedをメソッドかattr_readerの前に付加する
    - 定義したクラス自身とサブクラスのインスタンスメソッドからレシーバ付きで呼び出せる
    - ある情報を公開はしたくはないがインスタンス同士で比較したい場合などに有効
  - モジュール
    - 用途
      - 継承を使わずにクラスにインスタンスメソッドを追加する、もしくは上書きする（ミックスイン）
        - 実質多重継承の仕組みを提供
      - 複数のクラスに共通のクラスメソッドを追加する
      - クラス名や定数名の衝突を防ぐための名前空間
        - モジュールの階層構造が可能
        - ファイル構成もフォルダ毎にmoduleの入れ子になる
- 例外
  - 設計方針
    - 基本はRailsの機能が豊富な例外処理に任せる
      - どんなコードの例外でも拾おうとしない
      - 例外の種類は絞る
    - ライブラリ側でリソースの自動クローズを提供していることが多い。そちらをまず検討する。オープン時にブロック付きで渡すメソッドが多い。
  - 実装
    - retry可能
    - rescue => e で例外取得
      - e.full_messageに全文が入る
      - raiseだけで同じ例外をそのまま上にthrow
- yieldとproc
  - メソッドを変数に入れてそれを後で実行す仕組み
  - Rubyではブロック{}が関数になっている
  - Procはブロックをオブジェクト化するクラス(Procedureが由来)
  - .callで実行
  - ラムダ式で定義可能
    - `add_proc = (a,b=2){a+b}`
    - `add_proc.call(1) # 3`
  - 畳み込み演算のinject(init_value)
- パターンマッチ
  - フォーマットが異なるデータ群の一致を行いやすくする仕組み

  
## 次やること

- 8.Ruby cherryの続き

## 感じたこと

- Railsは例外の共通処理が豊富なのでまずはログを残してそのままraiseするだけでも良いかもしれない
- Rubyでは親のインスタンス変数を子クラスで上書きできてしてしまう。オーバーライドとは異なる仕組みなのか。設計時に親クラスの構造理解が必要


## 学習時間

今日：8h
今週：21h
累計：218h


